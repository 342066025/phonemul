
@keyframes phone-sim-v14-fadeInSlideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

#phone-sim-toggle-btn-v10-0{
    position:fixed;
    top:80px;
    right:10px;
    z-index:10000;
    width:40px;
    height:40px;
    background:#333;
    color:#fff;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    transition:transform .2s ease;
}
#phone-sim-toggle-btn-v10-0:hover{transform:scale(1.1)}

#phone-sim-panel-v10-0{
    width:360px;
    height:600px;
    border:8px solid #363636;
    border-radius:36px;
    position:fixed;
    z-index:9999;
    overflow:hidden;
    box-shadow:0 8px 30px rgba(0,0,0,.2);
    font-family:-apple-system,sans-serif;
    background-color:#f0f2f5;
}
#phone-sim-panel-v10-0 .phone-notch{
    position:absolute;
    top:0;
    left:50%;
    transform:translateX(-50%);
    width:150px;
    height:12px;
    background:#363636;
    border-bottom-left-radius:10px;
    border-bottom-right-radius:10px;
    z-index:100
}
#phone-sim-panel-v10-0 .status-bar{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:30px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    padding:12px 16px 0;
    font-size:12px;
    z-index:50;
    cursor:move; 
    color: #333;
    text-shadow: none;
    background: rgba(240, 240, 240, 0.7);
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
}

#phone-sim-panel-v10-0 .status-bar-center {
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    z-index: 1001;
}

#phone-sim-panel-v10-0 .character-selector {
    position: relative;
    cursor: pointer;
}

#phone-sim-panel-v10-0 .current-character {
    display: flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 10px;
    background: rgba(255,255,255,0.1);
    transition: background 0.2s;
    font-size: 11px;
}

#phone-sim-panel-v10-0 .current-character:hover {
    background: rgba(255,255,255,0.2);
}

#phone-sim-panel-v10-0 .character-name {
    max-width: 80px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

#phone-sim-panel-v10-0 .character-dropdown {
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    margin-top: 4px;
    background: rgba(0,0,0,0.9);
    border-radius: 8px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    min-width: 120px;
    max-height: 200px;
    overflow-y: auto;
    z-index: 1002;
}

#phone-sim-panel-v10-0 .character-list {
    padding: 4px 0;
}

#phone-sim-panel-v10-0 .character-item {
    padding: 8px 12px;
    cursor: pointer;
    border-radius: 4px;
    transition: background-color 0.2s;
    font-size: 11px;
    display: flex;
    align-items: center;
    gap: 8px;
    color: white;
    position: relative;
}

#phone-sim-panel-v10-0 .character-item:hover {
    background-color: rgba(255, 255, 255, 0.1);
}

#phone-sim-panel-v10-0 .character-item.current {
    background-color: rgba(0, 123, 255, 0.3);
    border-left: 3px solid #007bff;
}

#phone-sim-panel-v10-0 .character-item.empty {
    color: #999;
    cursor: default;
}

#phone-sim-panel-v10-0 .character-item.empty:hover {
    background-color: transparent;
}

#phone-sim-panel-v10-0 .character-item.error {
    color: #ff6b6b;
    cursor: default;
}

#phone-sim-panel-v10-0 .character-item.error:hover {
    background-color: transparent;
}

#phone-sim-panel-v10-0 .character-item.add-character {
    background-color: rgba(40, 167, 69, 0.2);
    border: 1px dashed rgba(40, 167, 69, 0.5);
    color: #28a745;
    font-weight: 500;
}

#phone-sim-panel-v10-0 .character-item.add-character:hover {
    background-color: rgba(40, 167, 69, 0.3);
    border-color: #28a745;
}

#phone-sim-panel-v10-0 .delete-character {
    margin-left: auto;
    color: #dc3545;
    opacity: 0;
    transition: opacity 0.2s;
    cursor: pointer;
    padding: 2px;
    border-radius: 2px;
}

#phone-sim-panel-v10-0 .character-item:hover .delete-character {
    opacity: 1;
}

#phone-sim-panel-v10-0 .delete-character:hover {
    background-color: rgba(220, 53, 69, 0.2);
}

#phone-sim-panel-v10-0 .character-item i {
    width: 12px;
    text-align: center;
}
#phone-sim-panel-v10-0 #homescreen-view .status-bar {
    color: white; 
    text-shadow: 0 1px 2px rgba(0,0,0,0.5); 
    background: transparent;
    -webkit-backdrop-filter: none;
    backdrop-filter: none;
}

#phone-sim-panel-v10-0 .status-bar-right{display:flex;gap:8px}
#phone-sim-panel-v10-0 .views-container{position:absolute;top:30px;left:0;right:0;bottom:0; overflow: hidden;}

#phone-sim-panel-v10-0 .view{
    position:absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    display:flex;
    background-color:#f0f2f5;
    flex-direction:column;
    
    /* Animation properties are now removed from the base class and controlled by animation classes */
    opacity: 0;
    pointer-events: none;
    z-index: 1;
}
#phone-sim-panel-v10-0 .view.active{
    opacity: 1;
    pointer-events: auto;
    z-index: 2; /* Active view is always on top */
}

#phone-sim-panel-v10-0 .subview{
    width:100%;
    height:100%;
    display:none; /* Use display none/flex instead of opacity for performance */
    flex-direction:column;
    position:absolute;
    top:0;
    left:0; 
    background-color: inherit;
    transition: opacity 0.2s ease-in-out;
}
#phone-sim-panel-v10-0 .subview.active{
    display: flex;
}

#phone-sim-panel-v10-0 .app-header{
    padding:10px 16px;
    background:rgba(240, 240, 240, 0.7);
    -webkit-backdrop-filter:blur(10px);
    backdrop-filter:blur(10px);
    color:#333;
    display:flex;
    align-items:center;
    font-weight:600;
    flex-shrink:0;
    border-bottom:1px solid rgba(0,0,0,.08);
    position:relative;
    height: 48px;
    box-sizing: border-box;
}
#phone-sim-panel-v10-0 .app-header h3{flex-grow:1;text-align:center;margin:0;padding-left:30px;padding-right:30px; font-size: 16px;}
#phone-sim-panel-v10-0 .app-header .header-actions{cursor:pointer;z-index:10;}

#phone-sim-panel-v10-0 .app-back-btn {
    background: none !important;
    border: none !important;
    cursor: pointer;
    font-size: 18px;
    color: #555 !important;
    padding: 0 !important;
    position: absolute;
    left: 16px;
    top: 50%;
    transform: translateY(-50%);
    z-index: 10;
    width: 30px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: flex-start;
}

#phone-sim-panel-v10-0 .phone-sim-menu{position:absolute;z-index:10005;background:#fff;border-radius:8px;box-shadow:0 2px 10px rgba(0,0,0,.2);padding:5px 0;min-width:100px;}
#phone-sim-panel-v10-0 .phone-sim-menu .menu-item{padding:8px 16px;cursor:pointer;font-size:14px;}
#phone-sim-panel-v10-0 .phone-sim-menu .menu-item:hover{background:#f0f0f0;}

.phone-sim-modal-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.4);display:flex;align-items:center;justify-content:center;z-index:10002;backdrop-filter:blur(3px);padding:10px;box-sizing:border-box;}
.phone-sim-dialog-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);display:flex;align-items:center;justify-content:center;z-index:10002;backdrop-filter:blur(3px);padding:10px;box-sizing:border-box;}
.phone-sim-dialog-overlay .phone-sim-dialog{background:#2c2f33;padding:20px;border-radius:12px;width:100%;max-width:380px;color:#c8c8d0;max-height:90vh;display:flex;flex-direction:column;box-sizing:border-box;}
.phone-sim-dialog-overlay .phone-sim-dialog h3{margin-top:0;color:#fff;flex-shrink:0;}
.phone-sim-dialog-overlay .phone-sim-dialog .dialog-content{flex-grow:1;overflow-y:auto;}
.phone-sim-dialog-overlay .phone-sim-dialog .dialog-input{width:100%;background:#3a3f47;border:1px solid #4a4e56;color:#c8c8d0;border-radius:8px;padding:10px;box-sizing:border-box;min-height:80px;resize:vertical;}
.phone-sim-dialog-overlay .phone-sim-dialog .dialog-buttons{flex-shrink:0;margin-top:20px;display:flex;justify-content:flex-end;gap:10px;}
.phone-sim-dialog-overlay .phone-sim-dialog .dialog-btn{border:none;padding:8px 18px;border-radius:8px;cursor:pointer;font-weight:600;}
.phone-sim-dialog-overlay .phone-sim-dialog .cancel-btn{background-color:#4a5568;color:#fff;}
.phone-sim-dialog-overlay .phone-sim-dialog .confirm-btn{background-color:#6C8CD5;color:#fff;}

#phone-sim-commit-btn-v10-0{position:absolute;bottom:80px;right:15px;width:44px;height:44px;background:#ff9800;color:white;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:22px;cursor:pointer;box-shadow:0 4px 12px rgba(0,0,0,0.2);transform:scale(0);transition:all .3s ease;z-index:105}
#phone-sim-commit-btn-v10-0.has-staged-messages{transform:scale(1)}
#phone-sim-commit-btn-v10-0::after{content:attr(data-count);position:absolute;top:-5px;right:-5px;background:red;color:white;border-radius:50%;width:20px;height:20px;font-size:12px;display:flex;align-items:center;justify-content:center;font-weight:bold;}

#phone-sim-panel-v10-0 #phone-sim-notification-banner{position:absolute;top:-100px;left:10px;right:10px;background:rgba(255,255,255,.8);backdrop-filter:blur(10px);border-radius:12px;padding:8px;box-shadow:0 4px 12px rgba(0,0,0,.1);z-index:200;transition:top .5s ease-in-out;}
#phone-sim-panel-v10-0 #phone-sim-notification-banner.show{top:10px;}
#phone-sim-panel-v10-0 .notification-content{display:flex;align-items:center;gap:10px;}
#phone-sim-panel-v10-0 .notification-avatar{width:36px;height:36px;border-radius:50%;object-fit:cover;}

#phone-sim-toggle-btn-v10-0 .unread-badge,
#phone-sim-panel-v10-0 .unread-badge {
    position:absolute;
    background-color:#ff3b30;
    color:white;
    border-radius:50%;
    width:20px;
    height:20px;
    font-size:11px;
    font-weight:700;
    display:flex;
    align-items:center;
    justify-content:center;
    line-height:1;
    z-index:10;
}
#phone-sim-toggle-btn-v10-0 .unread-badge{top:-2px;right:-2px;border:2px solid #363636;}

/* Micro-interactions: Applied only to buttons and app icons */
.app-block, .send-btn, .emoji-btn, .dial-key, .control-button, .call-button, .modal-btn, .dialog-btn, .moment-actions .action-btn, .friend-request-btn, .phone-contact-call-btn, .dial-call-btn, #browser-go-btn, #clear-history-btn, .forum-reply-send-btn, .nav-item {
    transition: transform 0.1s ease-out;
}

.app-block:active, .send-btn:active, .emoji-btn:active, .dial-key:active, .control-button:active, .call-button:active, .modal-btn:active, .dialog-btn:active, .moment-actions .action-btn:active, .friend-request-btn:active, .phone-contact-call-btn:active, .dial-call-btn:active, #browser-go-btn:active, #clear-history-btn:active, .forum-reply-send-btn:active, .nav-item:active {
    transform: scale(0.92);
}

/* Creation View Styles */
#phone-sim-panel-v10-0 #creation-view {
    background-color: #f0f2f5;
}
#phone-sim-panel-v10-0 #creation-form {
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 16px;
    flex: 1;
    overflow-y: auto;
}
#phone-sim-panel-v10-0 .creation-form-group {
    display: flex;
    flex-direction: column;
    gap: 6px;
}
#phone-sim-panel-v10-0 .creation-form-group label {
    font-size: 14px;
    font-weight: 500;
    color: #333;
}
#phone-sim-panel-v10-0 .creation-form-group input,
#phone-sim-panel-v10-0 .creation-form-group textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 15px;
    box-sizing: border-box;
}
#phone-sim-panel-v10-0 #creation-submit-btn {
    padding: 12px;
    border: none;
    border-radius: 8px;
    background-color: #007aff;
    color: white;
    font-size: 16px;
    font-weight: 600;
    cursor: pointer;
    margin-top: 10px;
}